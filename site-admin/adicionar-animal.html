<!DOCTYPE html>
<html style="height: 100%;">
<head>
    <title>Casa do Cão</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300" rel="stylesheet" type="text/css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.3/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/themes/base/jquery-ui.min.css" />
    <link rel="stylesheet" href="../estilo.css">
    <style>
        body{
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-fixed">
        <div class="container">
            <a class="navbar-brand" href="#" id="texto-icone"><img src="../recursos/paw-title.png" style="height: 45px;"></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse rounded-5" id="navbarNav">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item" id="nav-services">
                <a class="nav-link" href="#" >
                  Adicionar Animal
                </a>
              </li>
              <li class="nav-item" id="nav-marketplace">
                  <a class="nav-link" href="calendário-admin.html">Consultas Marcadas</a>
                </li>
              <li class="nav-item" id="nav-gerir    ">
                <a class="nav-link" href="gerirmarketplace.html">Gerir Marketplace</a>
              </li>
              <li class="nav-item" id="nav-about">
                <a class="nav-link" href="#" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDark-Sobre" aria-controls="offcanvasDark">Sobre</a>
              </li>
              <li class="nav-item" id="nav-login">
                  <a class="nav-link" href="/login e registo/log_in.html">Entrar</a> 
              </li>
            </ul>
          </div>
        </div>
        <!-- Curva SVG -->
        <svg class="top-curve" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 728.4 77.7">
            <defs>
              <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                <feDropShadow dx="0" dy="7" stdDeviation="4" flood-color="rgba(0, 0, 0, 0.2)" />
              </filter>
            </defs>
            <path fill="rgb(246, 242, 242)" d="M0 45.3c8.9 1.7 21.6 4 37 6.6C73.7 58.1 103.2 63 140.5 66c27.4 2.1 46.8 3.6 73.5 1.3 10.9-.9 29-2.5 52-8.4 15.1-3.8 16.8-5.6 44.5-14.1 24.7-7.6 37-11.4 49.3-13.7 22.1-4 39.1-3.8 60.8-3.5 23.4.3 41.1 2.3 55.9 4 26 2.9 47.8 6.9 51.1 7.5 18.3 3.3 19.6 4.3 30.8 5.7 4.6.6 22.2 2.6 45.4 1.3 5.7-.3 21.8-1.4 42.3-5.7 7.2-1.5 18.8-4 33.5-9.2 14.6-5.2 25.4-10.7 31.3-13.7 4.4-2.2 10.2-4.3 16.7-9.2 4.1-3.1 7.2-6.1 9.2-8.3H.2L0 45.3z" style="filter: url(#shadow);"></path>
          </svg> 
      </nav>
      <div class=" offcanvas offcanvas-start text-bg-dark" tabindex="-1" id="offcanvasDark-Sobre" aria-labelledby="offcanvasDarkLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="offcanvasDarkLabel">Vetria</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <p>Projeto realizado por:</p>
          <p>125091: Bernardo Miguel dos Santos </p>
          <p>125264: Luís Correia </p>
          <p>124754: Mª Inês Gonçalves </p>
          <p>125696: Rodrigo Machado Pereira </p>
          <p>UA- deti</p>
        </div>
      </div>
    <div class="container" style="padding-top:150px;flex: 1; display: flex; flex-direction: column;">
        <div class="border-bottom py-3 mb-3">
            <h2><i class="fa fa-paw"></i>  Registo Animal</h2>
        </div>
        <table class="table table-sm table-striped">
            <thead class="bg-dark text-light">
                <tr>
                    <th>Nome do Animal</th>
                    <th>Email do Dono</th>
                    <th>Raça</th>
                    <th>Sexo</th>
                    <th></th>
                </tr>
            </thead>
            <tbody data-bind="foreach: participants">
                <tr data-bind="click: function() { window.location.href = 'monitorizacao-admin.html'}" style="cursor: pointer;">
                    <td data-bind="text:name"></td>
                    <td data-bind="text:email"></td>
                    <td data-bind="text:raca"></td>
                    <td data-bind="text:sex"></td>
                    <td class="text-end">
                        <button class="btn btn-sm btn-primary"
                                data-bind="click : $parent.readParticipant"
                                data-bs-target="#readParticipantModal"
                                data-bs-toggle="modal">
                            <i class="fa fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" data-bind="click:$parent.deleteParticipant"><i class="fa fa-trash-o"></i></button>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="text-end">
            <button data-bs-target="#createParticipantModal" data-bs-toggle="modal" class="btn btn-outline-dark"><i class="fa fa-plus"></i></button>
            <button data-bind="click:readParticipants, disable : hasParticipants" class="btn btn-outline-dark"><i class="fa fa-folder-open-o"></i></button>
        </p>
    </div>
    <!-- Modal CREATE Participant -->
    <div class="modal" tabindex="-1" role="dialog" id="createParticipantModal">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #bb9469;">
                    <h5 class="modal-title text-light">Novo Animal</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-1 row">
                            <label for="exampleInputName1" class="col-2 col-form-label">Nome:</label>
                            <div class="col-10">
                                <input type="text" class="form-control" id="exampleInputName1" placeholder="Name">
                            </div>
                        </div>
                        <div class="mb-1 row">
                            <label for="exampleInputEmail1" class="col-sm-2 col-form-label">Email do Dono:</label>
                            <div>
                                <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email">
                            </div>
                        </div>
                        <div class="mb-1 row">
                            <label for="exampleInputAddress1" class="col-sm-2 col-form-label">Address do Dono:</label>
                            <div>
                                <textarea type="text" class="form-control" id="exampleInputAddress1" placeholder="Address" rows="4"></textarea>
                            </div>
                        </div>
                        <div class="mb-1 row">
                            <label for="exampleInputBirthDate1" class="col-sm-4 col-form-label">Data de Nascimento do Animal:</label>
                            <div>
                                <input type="text" class="form-control" id="exampleInputBirthDate1" placeholder="BirthDate">
                            </div>
                        </div>
                        <div class="mb-1 row">
                            <label class="col-sm-2 col-form-label">Sexo:</label>
                            <div>
                                <label class="radio-inline col-sm-3"><input type="radio" name="exampleInputSex1" value="Male"> Male</label>
                                <label class="radio-inline col-sm-3"><input type="radio" name="exampleInputSex1" value="Female"> Female</label>
                            </div>
                        </div>
                        <div class="mb-1 row">
                            <label for="exampleInputraca1" class="col-sm-2 col-form-label">Raça</label>
                            <div>
                                <input type="text" class="form-control" id="exampleInputraca1" placeholder="Raça">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" data-bind="click : createParticipant">Create</button>
                    <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal EDIT Participant -->
    <div class="modal fade" tabindex="-1" role="dialog" id="readParticipantModal">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header text-light" style="background-color: #bb9469;">
                    <h5 class="modal-title">Editar Animal</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <input type="hidden" id="exampleHiddenIndex2" />
                        <div class="mb-1 row">
                            <label for="exampleInputName2" class="col-sm-2 col-form-label">Nome:</label>
                            <div>
                                <input type="text" class="form-control" id="exampleInputName2" placeholder="Name">
                            </div>
                        </div>
                        <div class="mb-1 row">
                            <label for="exampleInputEmail2" class="col-sm-2 col-form-label">Email do Dono:</label>
                            <div>
                                <input type="email" class="form-control" id="exampleInputEmail2" placeholder="Email">
                            </div>
                        </div>
                        <div class="mb-1 row">
                            <label for="exampleInputAddress2" class="col-sm-2 col-form-label">Address do Dono:</label>
                            <div>
                                <textarea type="text" class="form-control" id="exampleInputAddress2" placeholder="Address" rows="4"></textarea>
                            </div>
                        </div>
                        <div class="mb-1 row">
                            <label for="exampleInputBirthDate2" class="col-sm-4 col-form-label">Data de nascimento do Animal:</label>
                            <div>
                                <input type="text" class="form-control" id="exampleInputBirthDate2" placeholder="BirthDate">
                            </div>
                        </div>
                        <div class="mb-1 row">
                            <label class="col-sm-2 col-form-label">Sexo:</label>
                            <div>
                                <label class="radio-inline col-sm-3"><input type="radio" name="exampleInputSex2" value="Male"> Male</label>
                                <label class="radio-inline col-sm-3"><input type="radio" name="exampleInputSex2" value="Female"> Female</label>
                            </div>
                        </div>
                        <div class="mb-1 row">
                            <label for="exampleInputraca2" class="col-sm-2 col-form-label">Raça:</label>
                            <div>
                                <input type="text" class="form-control" id="exampleInputraca2" placeholder="BirthDate">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-sm" data-bind="click : updateParticipant">Update</button>
                    <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid" style="background-color:rgb(246, 242, 242); padding:0px;">
        <svg class="top-curve" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 728.4 77.7" style="width: 100%; height: 90px;">
          <path fill="white" d="M0 45.3c8.9 1.7 21.6 4 37 6.6C73.7 58.1 103.2 63 140.5 66c27.4 2.1 46.8 3.6 73.5 1.3 10.9-.9 29-2.5 52-8.4 15.1-3.8 16.8-5.6 44.5-14.1 24.7-7.6 37-11.4 49.3-13.7 22.1-4 39.1-3.8 60.8-3.5 23.4.3 41.1 2.3 55.9 4 26 2.9 47.8 6.9 51.1 7.5 18.3 3.3 19.6 4.3 30.8 5.7 4.6.6 22.2 2.6 45.4 1.3 5.7-.3 21.8-1.4 42.3-5.7 7.2-1.5 18.8-4 33.5-9.2 14.6-5.2 25.4-10.7 31.3-13.7 4.4-2.2 10.2-4.3 16.7-9.2 4.1-3.1 7.2-6.1 9.2-8.3H.2L0 45.3z"></path>
        </svg>
        <img src="../recursos/Universidade-de-Aveiro.png" style="height:60px;float: right;">
    </footer>
    <script>
        $(document).ready(function (){
      $.ajax({
        url: 'login e registo/main.php',
        success: function (data){
          var user = data;
          if(data != ""){
            document.getElementById("nav-login").innerHTML = '<a class="nav-link" href="#" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDark-User" aria-controls="offcanvasDark">' + data + '</a>';
          }
        }
      });
    });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="adicionar-animal.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.1/knockout-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
    <script>
    $(document).ready(() => {
        let user = localStorage.getItem('user');
        console.log(localStorage.getItem('user'));
        if(localStorage.user){
          document.getElementById("nav-login").innerHTML = '<a class="nav-link" href="#" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDark-User" aria-controls="offcanvasDark">' + user + '</a>';
        }
    });
    </script>
</body>
</html>
